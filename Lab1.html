<!DOCTYPE html>
<html>
<head>
<title>Lab1.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<p><span style="font-size: 40px;">LABORATORIO 1: Administración Linux y Shell Scripting </span></p>
<p><span style="font-size: 30px;">Gestión y manipulación de archivos</span></p>
<p>Esta parte está enfocada a explorar diferentes comandos del Shell y ver su efecto.</p>
<ol>
<li>Crear una carpeta llamada AS en vuestro directorio raíz de usuario.</li>
<li>Entrar dentro de la carpeta y comprobar que el directorio coincide con el contenido de la variable de entorno
PWD.</li>
<li>Instalar cal con el comando apt install ncal. Utilizar cal para mostrar un calendario y redirigir la salida a un fichero de texto. Comprobar que ese fichero se crea correctamente y que su contenido es el esperado.</li>
</ol>
<pre class="hljs"><code><div>maitane@as2-maitane:~/lab1$ cal
   September 2023
Su Mo Tu We Th Fr Sa
                1  2
 3  4  5  6  7  8  9
10 11 12 13 14 15 16
17 18 19 20 21 22 23
24 25 26 27 28 29 30
</div></code></pre>
<ol start="4">
<li>Copiar el fichero recién creado al directorio raíz del usuario.</li>
</ol>
<pre class="hljs"><code><div>maitane@as2-maitane:~/lab1$ cal &gt; calendario.txt

maitane@as2-maitane:~/lab1$ cat calendario.txt
   September 2023
Su Mo Tu We Th Fr Sa
                1  2
 3  4  5  6  7  8  9
10 11 12 13 14 15 16
17 18 19 20 21 22 23
24 25 26 27 28 29 30
</div></code></pre>
<ol start="5">
<li>Moverse al directorio raíz del usuario y listar en formato extendido (parámetro -l) los directorios y archivos presentes. Redirigir esa información a un fichero.</li>
</ol>
<pre class="hljs"><code><div>maitane@as2-maitane:~/lab1$ ls -l &gt; todo.txt

maitane@as2-maitane:~/lab1$ cat todo.txt
total 52
-rwxrw-r-- 1 maitane maitane 237 Sep 14 10:15 10email.sh
-rwxrw-r-- 1 maitane maitane  59 Sep 13 21:41 1lsdirs.sh
-rwxrw-r-- 1 maitane maitane 102 Sep 13 22:06 2see.sh
-rwxrw-r-- 1 maitane maitane 112 Sep 13 22:10 3largopalabra.sh
-rwxrw-r-- 1 maitane maitane 204 Sep 13 22:20 4escomando.sh
-rwxrw-r-- 1 maitane maitane 116 Sep 13 22:30 5carpetaFicheros.sh
-rwxrw-r-- 1 maitane maitane 183 Sep 14 08:56 6nLineaManualLs.sh
-rwxrw-r-- 1 maitane maitane 235 Sep 14 09:17 7txtat.sh
-rwxrw-r-- 1 maitane maitane  81 Sep 14 09:25 8borra.sh
-rwxrw-r-- 1 maitane maitane 378 Sep 14 09:39 9orden.sh
-rw-rw-r-- 1 maitane maitane 188 Sep 26 20:50 calendario.txt
-rw-rw-r-- 1 maitane maitane  85 Sep 14 10:17 cuerpo.txt
-rw-rw-r-- 1 maitane maitane  33 Sep 14 10:18 nombres.txt
-rw-rw-r-- 1 maitane maitane   0 Sep 26 20:51 todo.txt
</div></code></pre>
<ol start="6">
<li>Listar los 5 ficheros más nuevos de la carpeta /etc (que no sean carpetas).</li>
</ol>
<pre class="hljs"><code><div>maitane@as2-maitane:~/lab1$ ls -ltr /etc | grep -v <span class="hljs-string">'^d'</span> | tail -n 5
-rw-r--r-- 1 root root       1951 Sep 12 10:10 passwd
-rw-r----- 1 root shadow     1013 Sep 12 10:10 shadow
-rw-r--r-- 1 root root         84 Sep 20 16:36 fstab.backup
-rw-r--r-- 1 root root         84 Sep 20 17:35 fstab
-rw-r--r-- 1 root root      24229 Sep 26 13:57 ld.so.cache
</div></code></pre>
<ol start="7">
<li>Cambiar los permisos del fichero creado con información del calendario para que sólo el usuario propietario tenga capacidad de leer y escribir.</li>
</ol>
<pre class="hljs"><code><div>maitane@as2-maitane:~/lab1$ chmod 700 calendario.txt

maitane@as2-maitane:~/lab1$ chmod u-x calendario.txt

maitane@as2-maitane:~/lab1$ ls -l
total 56
-rwxrw-r-- 1 maitane maitane 237 Sep 14 10:15 10email.sh
-rwxrw-r-- 1 maitane maitane  59 Sep 13 21:41 1lsdirs.sh
-rwxrw-r-- 1 maitane maitane 102 Sep 13 22:06 2see.sh
-rwxrw-r-- 1 maitane maitane 112 Sep 13 22:10 3largopalabra.sh
-rwxrw-r-- 1 maitane maitane 204 Sep 13 22:20 4escomando.sh
-rwxrw-r-- 1 maitane maitane 116 Sep 13 22:30 5carpetaFicheros.sh
-rwxrw-r-- 1 maitane maitane 183 Sep 14 08:56 6nLineaManualLs.sh
-rwxrw-r-- 1 maitane maitane 235 Sep 14 09:17 7txtat.sh
-rwxrw-r-- 1 maitane maitane  81 Sep 14 09:25 8borra.sh
-rwxrw-r-- 1 maitane maitane 378 Sep 14 09:39 9orden.sh
-rw------- 1 maitane maitane 188 Sep 26 20:50 calendario.txt
-rw-rw-r-- 1 maitane maitane  85 Sep 14 10:17 cuerpo.txt
-rw-rw-r-- 1 maitane maitane  33 Sep 14 10:18 nombres.txt
-rw-rw-r-- 1 maitane maitane 830 Sep 26 20:51 todo.txt
</div></code></pre>
<ol start="8">
<li>Cambiar permisos para evitar que ningún otro usuario pueda acceder nuestro directorio raíz.</li>
</ol>
<pre class="hljs"><code><div>maitane@as2-maitane:~/lab1$ ls -l /home
total 8
drwxr-xr-x 10 maitane maitane 4096 Sep 26 14:42 maitane
drwxr-xr-x  3 ubuntu  ubuntu  4096 Sep 12 10:10 ubuntu

maitane@as2-maitane:~/lab1$ chmod o-x /home/maitane

maitane@as2-maitane:~/lab1$ ls -l /home
total 8
drwxr-xr-- 10 maitane maitane 4096 Sep 26 14:42 maitane
drwxr-xr-x  3 ubuntu  ubuntu  4096 Sep 12 10:10 ubuntu
</div></code></pre>
<ol start="9">
<li>Comprobar cuántos usuarios hay en el sistema y cual es el nuestro Shell de inicio.</li>
</ol>
<pre class="hljs"><code><div>maitane@as2-maitane:~/lab1$ wc -l /etc/passwd
36 /etc/passwd

maitane@as2-maitane:~/lab1$ <span class="hljs-built_in">echo</span> <span class="hljs-variable">$SHELL</span>
/bin/bash
</div></code></pre>
<ol start="10">
<li>Comprobar cuándo y desde donde accediste la última vez al sistema.</li>
</ol>
<pre class="hljs"><code><div>maitane@as2-maitane:~/lab1$ last | head -n 1
maitane  pts/0        88.14.240.110    Tue Sep 26 20:44   still logged <span class="hljs-keyword">in</span>

</div></code></pre>
<ol start="11">
<li>Comprimir en un archivo .tar.gz los contenidos del directorio $HOME. Descomprimirlos /tmp y comprobar que se ha hecho correctamente.</li>
</ol>
<pre class="hljs"><code><div>maitane@as2-maitane:~/lab1$ tar -czvf /tmp/nuevoHome.tar.gz <span class="hljs-variable">$HOME</span>
tar: Removing leading `/<span class="hljs-string">' from member names
/home/maitane/
/home/maitane/.ssh/
/home/maitane/.ssh/authorized_keys
/home/maitane/ubuntu-22.04.3-live-server-amd64.iso

maitane@as2-maitane:~/lab1$ ls /tmp/
nuevoHome.tar.gz

maitane@as2-maitane:~/lab1$ tar -xzvf /tmp/nuevoHome.tar.gz -C /tmp/
home/maitane/
home/maitane/.ssh/
home/maitane/.ssh/authorized_keys
home/maitane/ubuntu-22.04.3-live-server-amd64.iso

maitane@as2-maitane:~/lab1$ ls /tmp/
home  nuevoHome.tar.gz

</span></div></code></pre>
<ol start="12">
<li>Como usuario “root”, buscar todos los archivos que sean propiedad de tu usuario en el sistema (desde el directorio raíz /) y listarlos en forma extendida (con toda la información).</li>
</ol>
<p>La última parte del comando <code>-exec ls -l {} \;</code> se utiliza en combinación con el comando <code>find</code> para realizar una acción específica en cada archivo encontrado por <code>find</code>.</p>
<ul>
<li><code>-exec</code>: le indica a <code>find</code> que ejecute un comando en cada archivo o directorio que coincida con los criterios de búsqueda.</li>
<li><code>ls -l</code>: El comando que se ejecuta en cada archivo.</li>
<li><code>{}</code>: marcador que <code>find</code> reemplaza con la ruta completa de cada archivo antes de ejecutar el comando.</li>
<li><code>\;</code>: Esta parte indica el final del comando <code>-exec</code> para que <code>find</code> sepa dónde termina.</li>
</ul>
<pre class="hljs"><code><div>maitane@as2-maitane:~/lab1$ sudo find / -user root -<span class="hljs-built_in">exec</span> ls -l {} \;
total 64
lrwxrwxrwx   1 root root     7 Sep  7 21:40 bin -&gt; usr/bin
drwxr-xr-x   4 root root  4096 Sep 26 13:57 boot
drwxr-xr-x  16 root root  4000 Sep 26 20:44 dev
drwxr-xr-x  97 root root  4096 Sep 26 20:44 etc
drwxr-xr-x   4 root root  4096 Sep 12 10:10 home
lrwxrwxrwx   1 root root     7 Sep  7 21:40 lib -&gt; usr/lib
lrwxrwxrwx   1 root root     9 Sep  7 21:40 lib32 -&gt; usr/lib32
lrwxrwxrwx   1 root root     9 Sep  7 21:40 lib64 -&gt; usr/lib64
lrwxrwxrwx   1 root root    10 Sep  7 21:40 libx32 -&gt; usr/libx32
drwx------   2 root root 16384 Sep  7 21:44 lost+found
drwxr-xr-x   2 root root  4096 Sep  7 21:40 media
drwxr-xr-x   3 root root  4096 Sep 20 16:52 mnt
drwxr-xr-x   2 root root  4096 Sep  7 21:40 opt
dr-xr-xr-x 167 root root     0 Sep 26 20:44 proc
drwx------   5 root root  4096 Sep 26 14:30 root
drwxr-xr-x  25 root root   840 Sep 26 20:44 run
lrwxrwxrwx   1 root root     8 Sep  7 21:40 sbin -&gt; usr/sbin
drwxr-xr-x  12 root root  4096 Sep 13 17:41 snap
drwxr-xr-x   2 root root  4096 Sep  7 21:40 srv
dr-xr-xr-x  13 root root     0 Sep 26 20:44 sys
drwxrwxrwt  12 root root  4096 Sep 26 20:59 tmp
drwxr-xr-x  14 root root  4096 Sep  7 21:42 usr
drwxr-xr-x  13 root root  4096 Sep  7 21:43 var
lrwxrwxrwx 1 root root 7 Sep  7 21:40 /bin -&gt; usr/bin
total 0
lrwxrwxrwx 1 root root 8 Sep  7 21:40 /sbin -&gt; usr/sbin

</div></code></pre>
<ol start="13">
<li>Como usuario “root”, mostrar las últimas 30 líneas de /var/log/syslog.</li>
</ol>
<pre class="hljs"><code><div>maitane@as2-maitane:~/lab1$ tail -n 30 /var/<span class="hljs-built_in">log</span>/syslog
Sep 26 20:44:51 as2-maitane systemd[1078]: Listening on GnuPG cryptographic agent (ssh-agent emulation).
Sep 26 20:44:51 as2-maitane systemd[1078]: Listening on GnuPG cryptographic agent and passphrase cache.
Sep 26 20:44:51 as2-maitane systemd[1078]: Listening on debconf communication socket.
Sep 26 20:44:51 as2-maitane systemd[1078]: Listening on REST API socket <span class="hljs-keyword">for</span> snapd user session agent.
Sep 26 20:44:51 as2-maitane systemd[1078]: Listening on D-Bus User Message Bus Socket.
Sep 26 20:44:51 as2-maitane systemd[1078]: Reached target Sockets.
Sep 26 20:44:51 as2-maitane systemd[1078]: Reached target Basic System.
Sep 26 20:44:51 as2-maitane systemd[1078]: Reached target Main User Target.
Sep 26 20:44:51 as2-maitane systemd[1078]: Startup finished <span class="hljs-keyword">in</span> 108ms.
Sep 26 20:44:51 as2-maitane systemd[1]: Started User Manager <span class="hljs-keyword">for</span> UID 1001.
Sep 26 20:44:51 as2-maitane systemd[1]: Started Session 1 of user maitane.
Sep 26 20:45:00 as2-maitane systemd[1]: systemd-fsckd.service: Succeeded.
Sep 26 20:45:01 as2-maitane CRON[1186]: (root) CMD (<span class="hljs-built_in">command</span> -v debian-sa1 &gt; /dev/null &amp;&amp; debian-sa1 1 1)
Sep 26 20:45:08 as2-maitane systemd[1]: systemd-hostnamed.service: Succeeded.
Sep 26 20:45:12 as2-maitane systemd[1]: systemd-timedated.service: Succeeded.
Sep 26 20:54:42 as2-maitane systemd[1]: Starting GCE Workload Certificate refresh...
Sep 26 20:54:42 as2-maitane gce_workload_cert_refresh[1233]: 2023/09/26 20:54:42: Error getting config status, workload certificates may not be configured: HTTP 404
Sep 26 20:54:42 as2-maitane gce_workload_cert_refresh[1233]: 2023/09/26 20:54:42: Done
Sep 26 20:54:42 as2-maitane systemd[1]: gce-workload-cert-refresh.service: Succeeded.
Sep 26 20:54:42 as2-maitane systemd[1]: Finished GCE Workload Certificate refresh.
Sep 26 20:55:01 as2-maitane CRON[1246]: (root) CMD (<span class="hljs-built_in">command</span> -v debian-sa1 &gt; /dev/null &amp;&amp; debian-sa1 1 1)
Sep 26 20:59:42 as2-maitane systemd[1]: Starting Cleanup of Temporary Directories...
Sep 26 20:59:42 as2-maitane systemd[1]: systemd-tmpfiles-clean.service: Succeeded.
Sep 26 20:59:42 as2-maitane systemd[1]: Finished Cleanup of Temporary Directories.
Sep 26 21:04:42 as2-maitane systemd[1]: Starting GCE Workload Certificate refresh...
Sep 26 21:04:42 as2-maitane gce_workload_cert_refresh[7530]: 2023/09/26 21:04:42: Error getting config status, workload certificates may not be configured: HTTP 404
Sep 26 21:04:42 as2-maitane gce_workload_cert_refresh[7530]: 2023/09/26 21:04:42: Done
Sep 26 21:04:42 as2-maitane systemd[1]: gce-workload-cert-refresh.service: Succeeded.
Sep 26 21:04:42 as2-maitane systemd[1]: Finished GCE Workload Certificate refresh.
Sep 26 21:05:01 as2-maitane CRON[7540]: (root) CMD (<span class="hljs-built_in">command</span> -v debian-sa1 &gt; /dev/null &amp;&amp; debian-sa1 1 1)
</div></code></pre>
<p><span style="font-size: 30px;">Shell Scripting</span></p>
<ol>
<li>Crear un script llamado lsdirs.sh que muestre los directorios contenidos en el directorio actual.<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/bash</span>
 <span class="hljs-keyword">for</span> archivo <span class="hljs-keyword">in</span> `ls`; <span class="hljs-keyword">do</span>
         <span class="hljs-built_in">echo</span> <span class="hljs-variable">$archivo</span>;
 <span class="hljs-keyword">done</span>
</div></code></pre>
</li>
<li>Crear un script llamado see.sh que reciba un nombre de fichero/directorio como parámetro. Si el nombre corresponde a un fichero, el script muestra el contenido del fichero con more, sino muestra el contenido del directorio con ls.<pre class="hljs"><code><div> <span class="hljs-comment">#!/bin/bash</span>
 <span class="hljs-keyword">if</span> [ -d <span class="hljs-variable">$1</span> ]; <span class="hljs-keyword">then</span>
         ls <span class="hljs-variable">$1</span>
 <span class="hljs-keyword">elif</span> [ -f <span class="hljs-variable">$1</span> ]; <span class="hljs-keyword">then</span>
         more <span class="hljs-variable">$1</span>
 <span class="hljs-keyword">else</span>
         <span class="hljs-built_in">echo</span> <span class="hljs-string">"prueba de nuevo"</span>
 <span class="hljs-keyword">fi</span>
</div></code></pre>
</li>
<li>Crear un script que pida al usuario que teclee una palabra y escriba por pantalla el número de caracteres de esa palabra.<pre class="hljs"><code><div> <span class="hljs-comment">#!/bin/bash</span>
 <span class="hljs-built_in">echo</span> <span class="hljs-string">"Mete una palabra:"</span>
 <span class="hljs-built_in">read</span> palabra
 <span class="hljs-built_in">echo</span> <span class="hljs-string">"La palabra <span class="hljs-variable">$palabra</span> tiene una longitud de <span class="hljs-variable">${#palabra}</span>"</span>
</div></code></pre>
</li>
<li>Crear un script que pida al usuario que teclee una palabra y compruebe si es un comando del sistema o no.<pre class="hljs"><code><div> <span class="hljs-comment">#!/bin/bash</span>
 <span class="hljs-built_in">echo</span> <span class="hljs-string">"Introduce una palabra:"</span>
 <span class="hljs-built_in">read</span> palabra
 <span class="hljs-keyword">if</span>  <span class="hljs-built_in">command</span> -v <span class="hljs-string">"<span class="hljs-variable">$palabra</span>"</span> &gt;/dev/null 2&gt;&amp;1 ; <span class="hljs-keyword">then</span>
         <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$palabra</span> es un comando del sistema."</span>
 <span class="hljs-keyword">else</span>
         <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$palabra</span> NO es un comando del sistema."</span>
 <span class="hljs-keyword">fi</span>
</div></code></pre>
</li>
<li>Crear un script que cree una carpeta llamada cosas y después cree 100 ficheros vacíos llamados fich<numero>.txt dentro de ella, donde <numero> es un número entre 0 y 99.<pre class="hljs"><code><div> <span class="hljs-comment">#!/bin/bash</span>
 <span class="hljs-keyword">if</span> [ ! -d cosas ]; <span class="hljs-keyword">then</span>
         mkdir cosas
 <span class="hljs-keyword">fi</span>
 <span class="hljs-built_in">cd</span> cosas || <span class="hljs-built_in">exit</span>
 <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> {0..99}; <span class="hljs-keyword">do</span>
         touch <span class="hljs-string">"fich<span class="hljs-variable">$i</span>.txt"</span>
 <span class="hljs-keyword">done</span>
</div></code></pre>
</li>
<li>Extender el script anterior para que cada fichero contenga la N-sima línea delmanual de ls (man ls). El fichero fich0.txt tendrá la línea 0 del manual, fich1.txt tendrá la línea 1 del manual, …<pre class="hljs"><code><div> <span class="hljs-comment">#!/bin/bash</span>
 <span class="hljs-keyword">if</span> [ ! -d cosas2 ]; <span class="hljs-keyword">then</span>
         mkdir cosas2
 <span class="hljs-keyword">fi</span>

 i=0

 <span class="hljs-built_in">cd</span> cosas2 || <span class="hljs-built_in">exit</span>

 man ls | <span class="hljs-keyword">while</span> IFS= <span class="hljs-built_in">read</span> -r linea; <span class="hljs-keyword">do</span>
         touch <span class="hljs-string">"fich<span class="hljs-variable">$i</span>.txt"</span>
         <span class="hljs-built_in">echo</span> <span class="hljs-variable">$linea</span> &gt; <span class="hljs-string">"fich<span class="hljs-variable">$i</span>.txt"</span>
         ((i++))
 <span class="hljs-keyword">done</span>
</div></code></pre>
</li>
<li>Crear un script que modifique la extensión de todos los ficheros .txt de un directorio a .t.<pre class="hljs"><code><div> <span class="hljs-comment">#!/bin/bash</span>
 <span class="hljs-comment">#for fichero in *.txt; do</span>
 <span class="hljs-comment">#       nombre=$(cut -d "." -f 1 $fichero)</span>
 <span class="hljs-comment">#       mv $fichero "$nombre.t"</span>
 <span class="hljs-comment">#done</span>

 <span class="hljs-keyword">for</span> fichero <span class="hljs-keyword">in</span> *.txt; <span class="hljs-keyword">do</span>
         <span class="hljs-keyword">if</span> [ -f <span class="hljs-string">"<span class="hljs-variable">$fichero</span>"</span> ]; <span class="hljs-keyword">then</span>
                 nombre=<span class="hljs-string">"<span class="hljs-variable">${fichero%.txt}</span>"</span>
                 mv <span class="hljs-string">"<span class="hljs-variable">$fichero</span>"</span> <span class="hljs-string">"<span class="hljs-variable">${nombre}</span>.t"</span>
         <span class="hljs-keyword">fi</span>
 <span class="hljs-keyword">done</span>
</div></code></pre>
</li>
<li>Crear un script borra.sh que reciba un número indefinido de parámetros (de 0 a 9) y borre el fichero correspondiente a la suma del valor de los parámetros que reciba. Por ejemplo, borra.sh 1 4 5 9, borraría el fichero fich19.txt (1 + 4 + 5 + 9 = 19).<pre class="hljs"><code><div> <span class="hljs-comment">#!/bin/bash</span>
 suma=0
 <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>; <span class="hljs-keyword">do</span>
         suma=$((<span class="hljs-variable">$suma</span>+<span class="hljs-variable">$i</span>))
 <span class="hljs-keyword">done</span>
 rm <span class="hljs-string">"fich<span class="hljs-variable">$suma</span>.txt"</span>
</div></code></pre>
</li>
<li>Crear un script orden.sh que muestre el contenido del fichero /etc/passwd ordenado por nombre de usuario, UID o GID. El script recibirá un parámetro que indique cuál de los 3 utilizar como clave de ordenación.</li>
</ol>
<pre class="hljs"><code><div> <span class="hljs-comment">#!/bin/bash</span>
 <span class="hljs-built_in">echo</span> <span class="hljs-string">"Qué clave de ordenación deseas usar: nombre de usuario (1), UID (2) o GID (3):"</span>
 <span class="hljs-built_in">read</span> clave

 <span class="hljs-keyword">case</span> <span class="hljs-variable">$clave</span> <span class="hljs-keyword">in</span>
         1)
                 <span class="hljs-built_in">echo</span> <span class="hljs-string">"Con usuario"</span>
                 sort -t <span class="hljs-string">":"</span> -k1 /etc/passwd
                 ;;
         2)
                 <span class="hljs-built_in">echo</span> <span class="hljs-string">"Con UID"</span>
                 sort -t <span class="hljs-string">":"</span> -k3n /etc/passwd
                 ;;
         3)
                 <span class="hljs-built_in">echo</span> <span class="hljs-string">"Con GID"</span>
                 sort -t <span class="hljs-string">":"</span> -k4n /etc/passwd
                 ;;
         *)
                 <span class="hljs-built_in">echo</span> <span class="hljs-string">"Opción no válida, prueba de nuevo (elige 1, 2 o 3)"</span>
                 ;;
 <span class="hljs-keyword">esac</span>
</div></code></pre>
<ol start="10">
<li>Imagina que quieres mandar un e-mail con el mismo cuerpo a varios destinatarios, pero personalizando la primera línea con el nombre de cada uno. Crear un fichero cuerpo.txt con el texto del cuerpo del e-mail y la palabra NOMBRE en cada lugar donde querrías poner el nombre, y un fichero nombres.txt con varios nombres personales. Crear un script que genere varios ficheros con el cuerpo del e-mail personalizado para cada destinatario.</li>
</ol>
<pre class="hljs"><code><div> <span class="hljs-comment">#!/bin/bash</span>
 reemplazar=<span class="hljs-string">"NOMBRE"</span>
 <span class="hljs-keyword">if</span> [[ -f <span class="hljs-string">"nombres.txt"</span> &amp;&amp; -f <span class="hljs-string">"cuerpo.txt"</span> ]]; <span class="hljs-keyword">then</span>
         <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> -r nombre; <span class="hljs-keyword">do</span>
                 <span class="hljs-built_in">echo</span> <span class="hljs-string">"PRIMER EMAIL PARA: <span class="hljs-variable">$nombre</span>"</span>
                 sed <span class="hljs-string">"s/<span class="hljs-variable">$reemplazar</span>/<span class="hljs-variable">$nombre</span>/g"</span> <span class="hljs-string">"cuerpo.txt"</span> &gt; <span class="hljs-string">"carta_<span class="hljs-variable">$nombre</span>.txt"</span>
         <span class="hljs-keyword">done</span> &lt; <span class="hljs-string">"nombres.txt"</span>
 <span class="hljs-keyword">fi</span>
</div></code></pre>

</body>
</html>
